<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
<script>
    function comma(str) {
        str = String(str);
        return str.replace(/(\d)(?=(?:\d{3})+(?!\d))/g, '$1,');
    }
	var deposit_volume = 2000000;
    var coin_volume = 3500;
	var stock_volume = 8;
	var exchange_rate;
	var trx;
	var goal;
	var stock_price;
	
    $(function () {
        $.ajax({
            url: "https://api.upbit.com/v1/ticker?markets=KRW-TRX",
            dataType: "json",
            success: function (data) {
                $.each(data, function (index, item) {
                    trx = Math.floor(item.trade_price * coin_volume);
                    document.getElementById('coin').innerHTML = comma(trx);
                    document.getElementById('deposit').innerHTML = comma(deposit_volume);
                })
            }
        })
    })
	$(function () {
        $.ajax({
            url: "https://quotation-api-cdn.dunamu.com/v1/forex/recent?codes=FRX.KRWUSD",
            dataType: "json",
            success: function (data) {
				exchange_rate=data[0].cashSellingPrice;
            }
        })
    })
	
	$(function () {
        $.ajax({
            url: "https://9wl9vr5c1l.execute-api.ap-northeast-2.amazonaws.com/default/Crawling-Example",
            dataType: "json",
            success: function (data) {
				stock_price = Math.floor(data[0]*stock_volume*exchange_rate);
				document.getElementById('stock').innerHTML = comma(stock_price);
				document.getElementById('total').innerHTML = comma(stock_price + trx + deposit_volume);
				goal = (stock_price+ trx + deposit_volume) / 100000;
				document.getElementsByTagName('progress')[0].value = goal.toFixed(2);
   				document.getElementsByTagName('b')[0].innerText = ' ' + goal.toFixed(2) + '%';
            }
        })
    })
	
    function time() {
        var time = new Date();
        document.getElementById("now").innerHTML = time.getFullYear() + "/" + time.getMonth() + "/" + time.getDate() + "/" + time.getHours() + ":" + time.getMinutes() + ":" + time.getSeconds();
    }
</script>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>건우의 경제적 자립 현황</title>
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo&display=swap" rel="stylesheet">
<style>
        * {
            font-family: 'Nanum Myeongjo', serif;
        }
</style>
<link rel="alternate icon" class="js-site-favicon" type="image/png" href="images/favicon.png">
<link rel="stylesheet" href="styles/style.css">
</head>
<body onload="time()">
<div class="wrapper">
	<div class="content">
		<div class="center">
			<h1>건우의 경제적 자립 현황</h1>
			<h3>🔥work hard🚨🔥</h3>
			<br>
			<h3>시가총액 : <span id="total"></span>원</h3>
			<span id="now">
		</span> 
			<br>
			<br>
			<br>
		</div>
		<br>
		<span>
		주식 : <span id="stock">
		</span>
		원 </span>
		<br>
		<span>
		코인 : <span id="coin">
		</span>
		원 </span>
		<br>
		<span>
		예금 : <span id="deposit">
		</span>
		원 </span>
		<br>
		<br>
		<br>
		<details>
		<summary>현재 목표</summary>
		<h4>
		자취 생활 예산 1000만원 </h4>
		<progress value="0" max="100"></progress><b></b>
		</details>
		<div class="center">
			<a href="http://youtube.com"><img src="images/youtube.png"></a>
			<a href="https://open.spotify.com"><img src="images/spotify.png"></a>
			<br>
			<a href="https://ap-northeast-2.console.aws.amazon.com/console/home?region=ap-northeast-2#"><img src="images/aws.png"></a>
			<a href="https://ide.goorm.io/my/dashboard
"><img src="images/goorm.png"></a>
			<br>
			<a href="https://github.com/login"><img src="images/github.png"></a>
			<a href="https://chrome.google.com/webstore/detail/adguard-adblocker/bgnkhhnnamicmpeenaelnjfhikgbkllg"><img src="images/adguard.png"></a>
			<br>
			<a href="https://www.acmicpc.net/login"><img src="images/baekjoon.png"></a>
			<a href="https://programmers.co.kr/users/login"><img src="images/programmers.png"></a>
		</div>
	</div>
</div>
</body>
</html>